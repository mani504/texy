def get_image_path(json_dir, image_base):
    # Filter only image files with the same base name as the JSON file
    image_files = [
        f for f in os.listdir(json_dir)
        if f.startswith(image_base) and f.lower().endswith(('.jpg', '.jpeg', '.png', '.gif'))
    ]
    
    if not image_files:
        raise FileNotFoundError(f"No image file found for the base name '{image_base}' in '{json_dir}'.")

    # Assuming there's only one image corresponding to the JSON file
    return os.path.join(json_dir, image_files[0])




# In your main function, call this like:
json_dir = os.path.dirname(json_path)  # Get the directory from the JSON path
image_base = shapes[0]['imagePath'][:-4]  # Remove the extension from imagePath
image_path = get_image_path(json_dir, image_base)
